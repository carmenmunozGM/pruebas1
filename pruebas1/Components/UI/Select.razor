@* Componente de Select Reutilizable *@
@typeparam TValue

<div class="select-container @Class">
    @if (!string.IsNullOrEmpty(Label))
    {
        <label class="select-label">@Label</label>
    }
    <div class="select-wrapper">
        <select 
            class="select-input @(Disabled ? "select-disabled" : "")"
            @bind="CurrentValue"
            disabled="@Disabled">
            @if (!string.IsNullOrEmpty(Placeholder))
            {
                <option value="" disabled selected>@Placeholder</option>
            }
            @ChildContent
        </select>
        <div class="select-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
    </div>
</div>

@code {
    [Parameter] public TValue? Value { get; set; }
    [Parameter] public EventCallback<TValue> ValueChanged { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string Label { get; set; } = "";
    [Parameter] public string Placeholder { get; set; } = "";
    [Parameter] public bool Disabled { get; set; } = false;
    [Parameter] public string Class { get; set; } = "";

    private TValue? CurrentValue
    {
        get => Value;
        set
        {
            if (!EqualityComparer<TValue>.Default.Equals(value, Value))
            {
                Value = value;
                ValueChanged.InvokeAsync(value);
            }
        }
    }
}
